{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nexport var cartSlice = createSlice({\n  name: \"Cart\",\n  initialState: {\n    value: {\n      user: \"Hardcoder user\",\n      updatedAt: \"\",\n      total: null,\n      items: []\n    }\n  },\n  reducers: {\n    addCartItem: function addCartItem(state, action) {\n      var productExists = state.value.items.some(function (item) {\n        return item.id === action.payload.id;\n      });\n      console.warn(\"=========\", state.value.items);\n      console.warn(\"=========\", action.payload);\n      if (productExists) {\n        state.value.items = state.value.items.map(function (item) {\n          if (item.id === action.payload.id) {\n            item.quantity += action.payload.quantity;\n            return item;\n          }\n          return item;\n        });\n      } else state.value.items.push(action.payload);\n      state.value.total = state.value.items.reduce(function (acc, currentItem) {\n        return acc += currentItem.price * currentItem.quantity;\n      }, 0);\n      state.value.updatedAt = new Date().toLocaleString();\n    },\n    removeCartItem: function removeCartItem(state, action) {\n      state.value = {\n        user: \"Hardcoder user\",\n        updatedAt: \"\",\n        total: null,\n        items: []\n      };\n    },\n    removeOneCartItem: function removeOneCartItem(state, action) {\n      var productExists = state.value.items.some(function (item) {\n        return item.id === action.payload.cartItem.id;\n      });\n      var findex = state.value.items.findIndex(function (item) {\n        return item.id === action.payload.cartItem.id;\n      });\n      console.warn(\" state.value.items\", state.value.items);\n      console.warn(\"action.payload.cartItem\", action.payload.cartItem);\n      console.warn(\" state.value.items\", state.value.items);\n      console.warn(\"action.payload.cartItem\", action.payload.cartItem);\n      console.warn(\"action.payload.cartItem.quantity\", action.payload.cartItem.quantity);\n      console.warn(\"??\", productExists, action.payload.cartItem.quantity);\n      if (productExists && action.payload.cartItem.quantity > 1) {\n        item.quantity = item.quantity - 1;\n        state.value.items[findex].quantity = state.value.items[findex].quantity - 1;\n        console.warn(\"xd\", state.value.items[findex].quantity);\n      } else {\n        state.value.items.splice(findex, 1);\n      }\n    }\n  }\n});\nvar _cartSlice$actions = cartSlice.actions,\n  addCartItem = _cartSlice$actions.addCartItem,\n  removeOneCartItem = _cartSlice$actions.removeOneCartItem,\n  removeCartItem = _cartSlice$actions.removeCartItem;\nexport { addCartItem, removeOneCartItem, removeCartItem };\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","cartSlice","name","initialState","value","user","updatedAt","total","items","reducers","addCartItem","state","action","productExists","some","item","id","payload","console","warn","map","quantity","push","reduce","acc","currentItem","price","Date","toLocaleString","removeCartItem","removeOneCartItem","cartItem","findex","findIndex","splice","_cartSlice$actions","actions","reducer"],"sources":["C:/Users/federico.currao/Documents/OtrosFC/App/ProyectoFinalAppReactNativeFcurrao/src/features/Cart/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";  \r\n\r\nexport const cartSlice = createSlice({\r\n    name: \"Cart\",\r\n    initialState: {\r\n        value: {\r\n            user: \"Hardcoder user\",\r\n            updatedAt: \"\",\r\n            total: null,\r\n            items: []\r\n        }\r\n    },\r\n    reducers: {\r\n        addCartItem: (state, action) => {\r\n            //Logic to add item\r\n            //1. Check productExists\r\n            const productExists = state.value.items.some(item => item.id === action.payload.id)\r\n \r\n            console.warn(\"=========\" , state.value.items);\r\n            console.warn(\"=========\" , action.payload );\r\n            //2. Distinct logic if exists product or not\r\n            if (productExists) {\r\n                state.value.items = state.value.items.map(item => {\r\n                    if (item.id === action.payload.id) {\r\n                        item.quantity += action.payload.quantity\r\n                        return item\r\n                    }\r\n                    return item\r\n                })\r\n            } else state.value.items.push(action.payload)\r\n\r\n            //3. Update total\r\n            state.value.total = state.value.items.reduce(\r\n                (acc, currentItem) => acc += currentItem.price * currentItem.quantity,\r\n                0\r\n            )\r\n\r\n            //4. Update updatedAt\r\n            state.value.updatedAt = new Date().toLocaleString()\r\n        },\r\n        removeCartItem: (state,action) => {\r\n            state.value = {user: \"Hardcoder user\",\r\n            updatedAt: \"\",\r\n            total: null,\r\n            items: []}\r\n            //Logic to remove item\r\n         \r\n        },\r\n        removeOneCartItem: (state,action) => {\r\n\r\n            const productExists = state.value.items.some(item => item.id === action.payload.cartItem.id)\r\n            const findex = state.value.items.findIndex(item => item.id === action.payload.cartItem.id)\r\n            \r\n            console.warn(\" state.value.items\",  state.value.items);\r\n            console.warn(\"action.payload.cartItem\", action.payload.cartItem);\r\n            \r\n            // action.payload.cartItem.slice(findex, 1)\r\n            // state.value.items.slice(findex, 1)\r\n            // console.warn(\"1\",productExists);\r\n            // console.warn(\"2\", findex);\r\n            // console.warn(\"3\", state);\r\n            // console.warn(\"3\", action.payload.cartItem.id);\r\n            // console.warn(\"3\", state.value.items);\r\n            console.warn(\" state.value.items\",  state.value.items);\r\n            console.warn(\"action.payload.cartItem\", action.payload.cartItem);\r\n            console.warn(\"action.payload.cartItem.quantity\", action.payload.cartItem.quantity);\r\n            // 2. Distinct logic if exists product or not\r\n            console.warn(\"??\", productExists, action.payload.cartItem.quantity);\r\n            if (productExists &&  action.payload.cartItem.quantity>1) {\r\n                item.quantity = item.quantity - 1 \r\n                state.value.items[findex].quantity = state.value.items[findex].quantity -1\r\n                console.warn(\"xd\",state.value.items[findex].quantity); \r\n                // state.value.items = state.value.items.map(item => {\r\n                //     if (item.id === action.payload.id) {\r\n                //         item.quantity = item.quantity - 1 \r\n                //     } \r\n                // })\r\n            } else {\r\n                state.value.items.splice(findex,1)\r\n            }\r\n            // console.warn(\"action.payload.cartItem\", action.payload.cartItem);\r\n            // console.warn(\"3 2\", state.value.items);\r\n\r\n\r\n            //3. Update total\r\n            // state.value.total = state.value.items.reduce(\r\n            //     (acc, currentItem) => acc += currentItem.price * currentItem.quantity,\r\n            //     0\r\n            // )\r\n\r\n            \r\n\r\n            //4. Update updatedAt\r\n            // state.value.updatedAt = new Date().toLocaleString()\r\n\r\n\r\n            // state.value = {user: \"Hardcoder user\",\r\n            // updatedAt: \"\",\r\n            // total: null,\r\n            // items: []}\r\n            //Logic to remove item\r\n         \r\n        }\r\n    }\r\n})\r\n\r\nexport const {addCartItem, removeOneCartItem, removeCartItem} = cartSlice.actions\r\n\r\nexport default cartSlice.reducer\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}